{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}

{% block title %}Добавить задачу{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center">Добавить новую задачу</h1>

    <div class="task-form-container">
        <form method="post">
            {% csrf_token %}

            <div class="form-section">
                <h2>Основная задача</h2>
                <div class="row">
                    <div class="col-md-6">
                        {% bootstrap_field form.title %}
                    </div>
                    <div class="col-md-6">
                        {% bootstrap_field form.category %}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                         {% bootstrap_field form.status %}
                    </div>
                    <div class="col-md-6">
                        {% bootstrap_field form.due_date %}
                    </div>
                </div>
            </div>

            <hr class="purple-line">

            <div class="form-section">
                <h2>Подзадачи</h2>
                {{ formset.management_form }}
                {% for subtask_form in formset %}
                    <div class="subtask-form-row row">
                        <div class="col-md-10">
                            {% bootstrap_field subtask_form.description show_label=False %}
                        </div>
                         <div class="col-md-2 d-flex align-items-center">
                             {% bootstrap_field subtask_form.is_completed %}
                         </div>
                    </div>
                {% endfor %}
            </div>

            <div class="form-buttons mt-4">
                <button type="submit" class="btn btn-login">Сохранить</button>
                <a href="{% url 'task:home' %}" class="btn btn-cancel">Назад</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}